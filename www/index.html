<!DOCTYPE html>
<html lang="en">

<head>
    <script>
		function notify(type, title = 0, icon = 0, message = 0, time = 5000, channelof = 0){
		
			if(type == 0){
				type = 'info';
			};
			
			template = '<div data-notify="container" class="col-xs-11 col-sm-3 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button>';
			
			if(icon != 0){
				template = template + '<img data-notify="icon" class="img-circle pull-left"> ';
			};
				
			if(title != 0){
				template = template + '<span style="display: block;" data-notify="title">{1}</span> ';
			};
			
			if(message != 0 && channelof != 0){
				template = template + '<span style="margin-top: 30px;" data-notify="message">{2}</span>' +
									'<br />' +
									'<span style="margin-top: 30px;" data-notify="message">'+ channelof +
									'<div style="margin-top: 20px;" class="progress" data-notify="progressbar">' +
										'<div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
									'</div>' +
									'<a href="{3}" target="{4}" data-notify="url"></a>' +
								'</div>';
			}else if(message != 0){
				template = template + '<span style="margin-top: 30px;" data-notify="message">{2}</span>' +
									'<div style="margin-top: 20px;" class="progress" data-notify="progressbar">' +
										'<div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
									'</div>' +
									'<a href="{3}" target="{4}" data-notify="url"></a>' +
								'</div>';
			}else if(channelof != 0){
				template = template + '<span style="margin-top: 30px;" data-notify="message">' + channelof +
									'<div style="margin-top: 20px;" class="progress" data-notify="progressbar">' +
										'<div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
									'</div>' +
									'<a href="{3}" target="{4}" data-notify="url"></a>' +
								'</div>';
			}else{
				template = template + '<div style="margin-top: 20px;" class="progress" data-notify="progressbar">' +
										'<div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
									'</div>' +
									'<a href="{3}" target="{4}" data-notify="url"></a>' +
								'</div>';
			};
				
				
			$.notify({
				// options
				icon: icon,
				title: title,
				message: message
			},{
				// settings
				element: 'body',
				type: type,
				newest_on_top: true,
				showProgressbar: true,
				placement: {
					from: "top",
					align: "right"
				},
				delay: time,
				animate: {
					enter: 'animated fadeInRight',
					exit: 'animated fadeOutRight'
				},
				icon_type: 'image',
				template: template
			});
		};


		var page = 1;
		
		function pagenext(){
			page += 1;
			if(page == 4){
				page = 1;
				document.getElementById("firstPage").style["display"] = "contents";
				document.getElementById("secondPage").style["display"] = "none";
				document.getElementById("thirdPage").style["display"] = "none";
			}else if(page == 3){
				document.getElementById("firstPage").style["display"] = "none";
				document.getElementById("secondPage").style["display"] = "none";
				document.getElementById("thirdPage").style["display"] = "contents";
			}else if(page == 2){
				document.getElementById("firstPage").style["display"] = "none";
				document.getElementById("secondPage").style["display"] = "contents";
				document.getElementById("thirdPage").style["display"] = "none";
			}
		};
		
		function pageprevious(){
			page -= 1;
			if(page == 0){
				page = 3;
				document.getElementById("firstPage").style["display"] = "none";
				document.getElementById("secondPage").style["display"] = "none";
				document.getElementById("thirdPage").style["display"] = "contents";
			}else if(page == 2){
				document.getElementById("firstPage").style["display"] = "none";
				document.getElementById("secondPage").style["display"] = "contents";
				document.getElementById("thirdPage").style["display"] = "none";
			}else if(page == 1){
				document.getElementById("firstPage").style["display"] = "contents";
				document.getElementById("secondPage").style["display"] = "none";
				document.getElementById("thirdPage").style["display"] = "none";
			};
		};
		
		if ("WebSocket" in window) {
			var ws = new WebSocket("ws://localhost:"+websocket);
			ws.onopen = function() {};
			ws.onerror = function (err) { 
				console.log(err);
			}
			ws.onmessage = function (evt) { 
				var message = evt.data;
				var msg = JSON.parse(message);
				if(msg['action'] == 'selected'){
					document.getElementById("img").innerHTML = '<img src="./img/'+msg['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '')+'.png" class="img-circle" width="50" height="50">';
				}else if(msg['action'] == 'registered'){
					document.getElementById("alertbox").parentNode.removeChild(document.getElementById("alertbox"));
				}else if(msg['action'] == 'refreshlist'){
					listobj = msg['listobj'];
					if(typeof listobj !== 'undefined'){
						var html = [];
						for (k = 0; k < listobj['array']; k++) {
							if (typeof listobj[k + 1] != undefined) {
								try {
									var pokemonname = listobj[k + 1]['name']
									var pokemonlevel = listobj[k + 1]['level']
									var pokemonnumber = k + 1;
								} catch (e) {};
								var color = 'background-color: transparent';
								var legendaries = ['Moltres', 'Articuno', 'Zapdos', 'Mewtwo', 'Mew', 'Entei', 'Raikou', 'Suicune', 'Ho-Oh', 'Lugia', 'Celebi', 'Regice', 'Regirock', 'Registeel', 'Regigigas', 'Latios', 'Latias', 'Groudon', 'Kyogre', 'Rayquaza', 'Jirachi', 'Deoxys', 'Uxie', 'Mesprit', 'Azelf', 'Dialga', 'Palkia', 'Giratina', 'Arceus', 'Cresselia', 'Darkrai', 'Shaymin', 'Heatran', 'Manaphy', 'Phione', 'Cobalion', 'Terrakion', 'Virizion', 'Keldeo', 'Tornadus', 'Thundurus', 'Landorus', 'Zekrom', 'Reshiram', 'Kyurem', 'Victini', 'Meloetta', 'Genesect', 'Xerneas', 'Yveltal', 'Zygarde', 'Hoopa', 'Volcanion', 'Silvally', 'Tapu-Lele', 'Tapu-Koko', 'Tapu-Bulu', 'Tapu-Fini', 'Cosmog', 'Cosmoem', 'Solgaleo', 'Lunala', 'Necrozma', 'Magearna', 'Marshadow', 'Zeraora', 'Poipole', 'Naganadel', 'Guzzlord', 'Celesteela', 'Kartana', 'Xurkitree', 'Blacephalon', 'Buzzwole', 'Pheromosa', 'Nihilego', 'Stakataka']
								if (legendaries.includes(pokemonname)) {
									var color = 'background-color: Gold';
								};
								try {
									if (typeof listobj[k + 1]['iv'] != undefined) {
										var pokemoniv = listobj[k + 1]['iv'];
										html[k] = '<div id="divpokemon' + pokemonnumber + '" style="' + color + '"><p style="display:inline-block;"><form style="float: left; padding: 5px;" id="formreleasepokemon' + pokemonnumber + '"><input onclick="dothis(\'release\',' + pokemonnumber + ',\'' + pokemonname + '\');" class="btn btn-danger" type="button" value="Release" id="releasepokemon' + pokemonnumber + '"/><input onclick="dothis(\'remove\',' + pokemonnumber + ',\'' + pokemonname + '\');" style="margin-left:5px" class="btn btn-danger" type="button" value="Remove" id="remove' + pokemonnumber + '"/></form><form style="float: left; padding: 5px;" id="formselectpokemon' + pokemonnumber + '"><input onclick="dothis(\'select\',' + pokemonnumber + ',\'' + pokemonname + '\');" class="btn btn-primary" type="button" value="Select" id="selectpokemon' + pokemonnumber + '"/></form><span class="label-text">Level ' + pokemonlevel + ' <img src="./img/' + pokemonname + '.png" class="img-circle" width="50" height="50"> ' + pokemonname + ' (' + pokemoniv + ')</span></p></div>'
									} else {
										html[k] = '<div id="divpokemon' + pokemonnumber + '" style="' + color + '"><p style="display:inline-block;"><form style="float: left; padding: 5px;" id="formreleasepokemon' + pokemonnumber + '"><input onclick="dothis(\'release\',' + pokemonnumber + ',\'' + pokemonname + '\');" class="btn btn-danger" type="button" value="Release" id="releasepokemon' + pokemonnumber + '"/><input onclick="dothis(\'remove\',' + pokemonnumber + ',\'' + pokemonname + '\');" style="margin-left:5px" class="btn btn-danger" type="button" value="Remove" id="remove' + pokemonnumber + '"/></form><form style="float: left; padding: 5px;" id="formselectpokemon' + pokemonnumber + '"><input onclick="dothis(\'select\',' + pokemonnumber + ',\'' + pokemonname + '\');" class="btn btn-primary" type="button" value="Select" id="selectpokemon' + pokemonnumber + '"/></form><span class="label-text">Level ' + pokemonlevel + ' <img src="./img/' + pokemonname + '.png" class="img-circle" width="50" height="50"> ' + pokemonname + '</span></p></div>'
									};
								} catch (e) {};
								if (k == listobj['array'] - 1) {
									var clusterize = new Clusterize({
										rows: html,
										scrollId: 'PokeScroll',
										contentId: 'PokeContent'
									});
								};
							};
						};
					}else{
						var nopokemons = '<label><span style="color:red;" class="label-text">You don\'t have any pokemons / Your list isn\'t loaded :c</span></label>'
						document.getElementById("laliste").innerHTML = nopokemons;
					};
				}else if(msg['action'] == 'removefromlist'){
					listobj = msg['listobj'];
					document.getElementById("divpokemon"+msg['number']).parentNode.removeChild(document.getElementById("divpokemon"+msg['number']));
				}else if(msg['action'] == 'addpokemon'){
					listobj = msg['listobj'];
					var html;
					try{
						var pokemonname = listobj[msg['number']]['name']
						var pokemonlevel = listobj[msg['number']]['level']
						var pokemonnumber = msg['number'];
					}catch(e){};
					try{
						if(typeof listobj[k+1]['iv'] != undefined){
							var pokemoniv = listobj[k+1]['iv'];
							html = '<p style="display:inline-block;"><form style="float: left; padding: 5px;" id="formreleasepokemon'+pokemonnumber+'"><input onclick="dothis(\'release\','+pokemonnumber+',\''+pokemonname+'\');" class="btn btn-danger" type="button" value="Release" id="releasepokemon'+pokemonnumber+'"/><input onclick="dothis(\'remove\','+pokemonnumber+',\''+pokemonname+'\');" style="margin-left:5px" class="btn btn-danger" type="button" value="Remove" id="remove'+pokemonnumber+'"/></form><form style="float: left; padding: 5px;" id="formselectpokemon'+pokemonnumber+'"><input onclick="dothis(\'select\','+pokemonnumber+',\''+pokemonname+'\');" class="btn btn-primary" type="button" value="Select" id="selectpokemon'+pokemonnumber+'"/></form><span class="label-text">Level '+pokemonlevel+' <img src="./img/'+pokemonname+'.png" class="img-circle" width="50" height="50"> '+pokemonname+' ('+pokemoniv+')</span></p>'
						}else{
							html = '<p style="display:inline-block;"><form style="float: left; padding: 5px;" id="formreleasepokemon'+pokemonnumber+'"><input onclick="dothis(\'release\','+pokemonnumber+',\''+pokemonname+'\');" class="btn btn-danger" type="button" value="Release" id="releasepokemon'+pokemonnumber+'"/><input onclick="dothis(\'remove\','+pokemonnumber+',\''+pokemonname+'\');" style="margin-left:5px" class="btn btn-danger" type="button" value="Remove" id="remove'+pokemonnumber+'"/></form><form style="float: left; padding: 5px;" id="formselectpokemon'+pokemonnumber+'"><input onclick="dothis(\'select\','+pokemonnumber+',\''+pokemonname+'\');" class="btn btn-primary" type="button" value="Select" id="selectpokemon'+pokemonnumber+'"/></form><span class="label-text">Level '+pokemonlevel+' <img src="./img/'+pokemonname+'.png" class="img-circle" width="50" height="50"> '+pokemonname+'</span></p>'
						};
					}catch(e){};
					var p = document.getElementById('laliste');
					var newElement = document.createElement('div');
					newElement.setAttribute('id', 'divpokemon'+color);
					newElement.setAttribute('style', 'divpokemon'+color);
					newElement.innerHTML = html;
					p.appendChild(newElement);
				}else if(msg['action'] == 'notification'){
					if(autocatcher == false){
						NotifIcon = './img/' + msg['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') + '.png';
						NotifTitle = 'A ' + msg['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') + ' has spawned !';
						NotifMessage = 'Type ' + msg['command'] + ' ' + msg['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') + ' to catch it ! <a onclick="catchpokemon(\'' + msg['name'].replace('é','e') + '\',\'' + msg['channelid'] +'\', \'' + msg['command'] +'\')" href="#">Catch it!</a>';
						NotifChannelOf = 'In #'+msg['channelname']+' of '+msg['server']+'</span>';
						notify('info', NotifTitle, NotifIcon, NotifMessage, 3000, NotifChannelOf);
					}else{
						NotifIcon = './img/' + msg['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') + '.png';
						NotifTitle = 'A ' + msg['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') + ' has spawned !';
						NotifMessage = 'Type ' + msg['command'] + ' ' + msg['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') + ' to catch it !';
						NotifChannelOf = 'In #'+msg['channelname']+' of '+msg['server']+'</span>';
						notify('info', NotifTitle, NotifIcon, NotifMessage, 3000, NotifChannelOf);
					};
				}else if(msg['action'] == 'warn'){
					if(msg['message'] == 'couldnt-normal'){
						NotifIcon = './img/' + msg['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') + '.png';
						NotifTitle = 'I couldn\'t catch ' + msg['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') + ' !';
						NotifChannelOf = 'In #'+msg['channelname']+' of '+msg['server']+'</span>';
						notify('warning', NotifTitle, NotifIcon, 0, 3000, NotifChannelOf);
					}else if(msg['message'] == 'couldnt-duplicate'){
						NotifIcon = './img/' + msg['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') + '.png';
						NotifTitle = 'I didn\'t catch' + msg['name'].replace('é','e') + ' because you have it!';
						NotifChannelOf = 'In #'+msg['channelname']+' of '+msg['server']+'</span>';
						notify('warning', NotifTitle, NotifIcon, 0, 3000, NotifChannelOf);
					}else if(msg['message'] == 'nickname-success'){
						NotifIcon = './img/' + msg['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') + '.png';
						NotifMessage = msg['nickname'];
						NotifTitle = 'I didn\'t catch' + msg['name'].replace('é','e') + ' because you have it!';
						notify('warning', NotifTitle, NotifIcon, 0, 3000);
					}else if(msg['message'] == 'nickname-failed'){
						NotifTitle = 'Couldn\'t change the nickname of the pokemon !';
						notify('danger', NotifTitle, 0, 0, 3000);
					};
				}else if(msg['action'] == 'refreshmovelist'){
					NotifTitle = 'Your pokemon moves list has been refreshed';
					notify('info', NotifTitle, 0, 0, 4000);
					pokemonname = msg['pokemonname'];
					channelset = msg['channelmovesid'];
					movelist = msg['moves'].split(';');
					document.getElementById("moveslist").innerHTML = "";
					fetch('./attacks.json').then(res => res.json())
						.then((lines) => {
							for(var k=0 ; k < movelist.length ; k++){
								console.log(lines[movelist[k]]);
								var html = '';
								html += '<p style="display:inline-block;">';
									html += '<form style="float: left; padding: 5px;" id="formmove'+pokemonnumber+'">';
										html += '<input onclick="setmove(\''+movelist[k]+'\',\''+pokemonname+'\',\'1\',\''+channelset+'\');" class="btn btn-warning" type="button" value="Set 1st" id="setmove'+movelist[k]+'"/>';
										html += '<input onclick="setmove(\''+movelist[k]+'\',\''+pokemonname+'\',\'2\',\''+channelset+'\');" style="margin-left:5px" class="btn btn-warning" type="button" value="Set 2nd" id="setmove'+movelist[k]+'"/>';
										html += '<input onclick="setmove(\''+movelist[k]+'\',\''+pokemonname+'\',\'3\',\''+channelset+'\');" style="margin-left:5px" class="btn btn-warning" type="button" value="Set 3rd" id="setmove'+movelist[k]+'"/>';
										html += '<input onclick="setmove(\''+movelist[k]+'\',\''+pokemonname+'\',\'4\',\''+channelset+'\');" style="margin-left:5px" class="btn btn-warning" type="button" value="Set 4th" id="setmove'+movelist[k]+'"/>';
									html += '</form>';
									html += '<button class="'+lines[movelist[k]]['Type']+'" disabled>'+lines[movelist[k]]['Type']+'</button>';
									if(lines[movelist[k]]['Effect'] != ""){
									html += '<span class="label-text"> '+movelist[k]+' <i class="fa fa-info-circle" data-toggle="tooltip" title="" id="tootltip" data-original-title="'+lines[movelist[k]]['Effect']+'"></i> for <img src="./img/'+pokemonname+'.png" class="img-circle" width="50" height="50"> '+pokemonname+'</span>';
									}else{
									html += '<span class="label-text"> '+movelist[k]+' for <img src="./img/'+pokemonname+'.png" class="img-circle" width="50" height="50"> '+pokemonname+'</span>';
									};
								html += '</p>';
								document.getElementById("moveslist").innerHTML += html;
							};
							$(function () {
								$('[data-toggle="tooltip"]').tooltip()
							})
					}).catch(err => console.error(err));
				};
			};
			ws.onclose = function() { 
				alert("Connection is closed..."); 
			};
		} else {
			alert("Your browser is NOT supported!");
		};
		
		function autochange(){
			autocatcher = document.getElementById("catcher").checked;
			ws.send('{"action":"aca","state":'+autocatcher+'}');
			if(autocatcher){
				NotifTitle = 'I will now auto catch pokemons !';
				notify('info', NotifTitle);
			}else{
				NotifTitle = 'I won\'t auto catch pokemons !';
				notify('info', NotifTitle);
			};
		};
		
		function duplichange(){
			duplicate = document.getElementById("duplicate").checked;
			ws.send('{"action":"duplicate","state":'+duplicate+'}');
			if(duplicate){
				NotifTitle = 'I will now catch every pokemons!';
				notify('info', NotifTitle);
			}else{
				NotifTitle = 'I won\'t catch duplicate pokemons !';
				notify('info', NotifTitle);
			};
		};
		
		function aliaschange(){
			aliases = document.getElementById("aliases").checked;
			ws.send('{"action":"aliases","state":'+aliases+'}');
			if(aliases){
				NotifTitle = 'I will now catch every pokemons with aliases !';
				notify('info', NotifTitle);
			}else{
				NotifTitle = 'I won\'t catch pokemons with aliases !';
				notify('info', NotifTitle);
			};
		};
		
		function refresh(){
			ws.send('{"action":"refresh"}');
			notify('info', 'Refreshing your pokemon list...');
		};
		
		function refreshmoves(){
			ws.send('{"action":"refreshmoves"}');
			NotifTitle = 'Refreshing your pokemon moves list...';
			notify('info', NotifTitle);
		};
		
		function catchpokemon(name, id, command){
			ws.send('{"action":"catch","name":"'+name+'","channelid":"'+id+'","command":"'+command+'"}');
		};
		
		function setmove(move, pokemonname, number, channel){
			<!-- setmove(\''+movelist[k]+'\',\''+pokemonname+'\',\'4\',\''+channelset+'\'); -->
			ws.send('{"action":"learn","pokemonname":"'+pokemonname+'","movenumber":'+number+',"movename":"'+move+'","channelset":"'+channel+'"}');
			NotifTitle = 'Learned move to ' + pokemonname.replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') + ' !';
			NotifIcon = './img/' + pokemonname.replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') + '.png';
			notify('info', NotifTitle, NotifIcon);
		};
		
		function spamchange(){
			var spamwillbeactive = document.getElementById("spammer").checked;
			if(spamwillbeactive == true){
				var spaminterval = document.getElementById("spaminterval").value;
				var spammessage = document.getElementById("spamtext").value;
				if(spammessage != undefined && spaminterval != undefined) {
					if(spammessage != " ") {
						if(spammessage != "") {
							console.log(spammessage);
							ws.send('{"action":"spam","state":true,"message":"'+spammessage+'","interval":'+spaminterval+'}');
							NotifTitle = 'Spamming enabled !';
							notify('info', NotifTitle);
						}else{
							alert('You didn\'t set any message/interval to spam !')
							document.getElementById("spammer").checked = false;
						};
					}else{
						alert('You didn\'t set any message/interval to spam !')
						document.getElementById("spammer").checked = false;
					};
				}else{
					alert('You didn\'t set any message/interval to spam !')
					document.getElementById("spammer").checked = false;
				};
			}else{
				ws.send('{"action":"spam","state":false}');
				NotifTitle = 'Spamming disabled !';
				notify('info', NotifTitle);
			};
		};
		
		function dothis(action,number,name){
			if(action == 'release'){
				NotifTitle = 'Releasing :';
				NotifIcon = './img/' + name + '.png';
				NotifMessage = name;
				notify('info', NotifTitle, NotifIcon, NotifMessage);
				ws.send('{"action":"release","number":'+number+'}');
			}else if(action == 'remove'){
				NotifTitle = 'Removing from the list :';
				NotifIcon = './img/' + name + '.png';
				NotifMessage = name;
				notify('info', NotifTitle, NotifIcon, NotifMessage);
				ws.send('{"action":"remove","number":'+number+'}');
			}else if(action == 'select'){
				NotifTitle = 'Selecting :';
				NotifIcon = './img/' + name + '.png';
				NotifMessage = name;
				notify('info', NotifTitle, NotifIcon, NotifMessage);
				ws.send('{"action":"select","number":'+number+',"name":"'+name+'"}');
			}else if(action == 'nickname'){
				var nickname = document.getElementById("nicknametext").value;
				if(nickname != undefined) {
					if(nickname != " ") {
						if(nickname != "") {
							ws.send('{"action":"nickname","nickname":"'+nickname+'"}');
						};
					};
				};
			}else if(action == 'tokenchange'){
				var tokenchange = document.getElementById("tokentext").value;
				if(tokenchange != undefined) {
					if(tokenchange != " ") {
						if(tokenchange != "") {
							NotifTitle = 'Restart the bot to apply the new token !';
							notify('danger', NotifTitle);
							ws.send('{"action":"tokenchange","token":"'+tokenchange+'"}');
						};
					};
				};
			}else if(action == 'autodelay'){
				var delay = document.getElementById("delayms").value;
				if(delay != undefined) {
					if(delay != " ") {
						if(delay != "") {
							NotifTitle = 'The delay has been changed !';
							notify('danger', NotifTitle);
							ws.send('{"action":"autodelaychange","delay":'+delay+'}');
						};
					};
				};
			};
		};
		
		function refreshwhitelist(id){
			ws.send('{"action":"whitelist","serverid":"'+id+'","serverstate":'+document.getElementById("server"+id).checked+'}');
		};
		
		function changeprefix(type,prefix){
			NotifTitle = 'This prefix has been changed!';
			notify('info', NotifTitle);
			ws.send('{"action":"prefixchange","type":"'+type+'","prefix":"'+prefix+'"}');
		};
		
		function farmerconfig(action, setting){
			// actions = token1, token2, channelid and state
			NotifTitle = 'Settings updated!';
			notify('info', NotifTitle);
			ws.send('{"action":"farmerconfig","change":"'+action+'","setting":"'+setting+'"}');
		};
	</script>
    <title>Pokécord Self-Bot Page</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="./css/style.css">
    <link href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.0/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mouse0270-bootstrap-notify/3.1.7/bootstrap-notify.js"></script>
	<link rel="stylesheet" href="./css/clusterize.css">
	<script src="./js/clusterize.min.js"></script>
    <link rel="shortcut icon" href="./icon/favicon.ico" type="image/x-icon">
	<link rel="icon" href="./icon/favicon.ico" type="image/x-icon">
</head>

<body>
    <div class="notifyjs-corner" id="corner" style="top: 0px; left: 0px;"></div>
    <div class="jumbotron">
        <h1 class="display-4" style="text-align: center;">Pokécord Helper</h1>
    </div>
    <div class="container" id="firstPage">
        <div class="container">
            <div class="row">
                <div class="col-lg-4" style="border:1px solid #cecece;">
                    <h2>Options :</h2>
                    <div class="form-check">
                        <label>
                            <form id="formautocatcher">
                                <input onchange="autochange();" type="checkbox" id="catcher"> <span class="label-text">Auto-catcher</span>
                            </form>
                        </label>
                    </div>
                    <div class="form-check">
                        <label>
                            <form id="formnoduplicate">
                                <input onchange="duplichange();" type="checkbox" id="duplicate"> <span class="label-text">Duplicate</span>
                            </form>
                        </label>
                    </div>
                    <div class="form-check">
                        <label>
                            <form id="formaliases">
                                <input onchange="aliaschange();" type="checkbox" id="aliases"> <span class="label-text">Aliases</span>
                            </form>
                        </label>
                    </div>
                </div>
                <div class="col-lg-8 pre-scrollable list_container" id="PokeScroll" class="clusterize-scroll" style="border:1px solid #cecece; max-height: 400px;">
                    <h2 style="direction:ltr;">Pokemon list : <button onclick="refresh();" style="font-size:24px; border:none; background:none;"><i class="fa fa-refresh"></i></button></h2>
					<div id="PokeContent" class="clusterize-content">
						<div class="clusterize-no-data">Loading…</div>
					</div>
                </div>
            </div>
        </div>
        <div class="container col-md-8" id="alertbox" style="margin-top: 25px; text-align: center;">
        </div>
        <div class="container" id="tokenrename" style="margin-top: 25px; text-align: center;">
            <div class="row">
                <div class="col-lg-6" style="border:1px solid #cecece;">
                    <h2>Spammer settings :</h2>
                    <div class="form-check">
                        <label style="display:inline-block;">
                            <form id="formnoduplicate">
                                <input onchange="spamchange();" type="checkbox" id="spammer"> <span class="label-text">Active</span>
                            </form>
                            <div class="field has-addons">
                                <label class="label">Spam Interval</label>
                                <p class="control is-expanded">
                                    <input style="display:inline-block; width:100px;" type="number" class="form-control" id="spaminterval" value="2000">
                                    <a style="font-size: 1rem; position: relative; text-align: left; display:inline-flex; background-color: #f5f5f5; border-color: #dbdbdb; color: #7a7a7a; border: 1px; border-radius: 3px;" class="button is-static">ms</a>
                                </p>
                            </div>
                            <div class="field">
                                <label class="label">Message</label>
                                <div class="control">
                                    <form id="form">
                                        <input type="text" style="width:500px;" class="form-control" id="spamtext" name="spamtext" placeholder="Message to send" />
                                    </form>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
                <div class="col-lg-6" style="border:1px solid #cecece;">
                    <label>
                        <div class="container">
                            <p style="display:inline-block;">
                                <form id="form" style="float: left; padding: 8px;">
                                    <input type="text" style="width:500px;" class="form-control" id="tokentext" name="tokentext" placeholder="Your self-token here" />
                                </form>
                                <form id="form" style="float: left; padding: 8px;">
                                    <input type="button" onclick="dothis('tokenchange',0,0);" class="btn btn-validate" id="token" name="token" value="Update" />
                                </form>
                            </p>
                            <p style="display:inline-block;">
                                <form id="form" style="float: left; padding: 8px;">
                                    <input type="text" style="width:500px;" class="form-control" id="nicknametext" name="nicknametext" placeholder="Nickname to set" />
                                </form>
                                <form id="form" style="float: left; padding: 8px;">
                                    <input type="button" onclick="dothis('nickname',selected['number'],selected['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', ''));" class="btn btn-validate" id="nickname" name="nickname" value="Change Nickname of" />
                                </form>
                                <div id="img" style="float: left; padding: 8px;">
                                </div>
                            </p>
                        </div>
                    </label>
                </div>
            </div>
        </div>
        <div class="container" id="learnmoves" style="margin-top: 25px; text-align: center; border:1px solid #cecece;">
            <h2 style="direction:ltr;">Learn moves : <button onclick="refreshmoves();" style="font-size:24px; border:none; background:none;"><i class="fa fa-refresh"></i></button></h2>
            <div id="moveslist">
            </div>
        </div>
    </div>
    <div class="container" id="secondPage" style="display: none;">
        <div class="container">
            <div class="row">
                <div class="col-lg-4" style="border:1px solid #cecece;">
                    <h2>More Options :</h2>
                    <div class="form-check">
                        <label>
                            <div style="display:inline-block;">
                                <input type="number" style="width:100px; display:inline-block;" class="form-control" id="delayms" name="delayms" placeholder="3000" />
                                <span style="font-size: 20px; display:inline-block;" class="label-text">Auto-Catch delay</span>
                                <button onclick="dothis('autodelay',0,0);" class="btn btn-validate" id="updatedelay" name="updatedelay"><span class="fa fa-check"></span></button>
                            </div>
                        </label>
                    </div>
                    <div class="form-check">
                        <label>
                            <div style="display:inline-block;">
                                <input type="text" style="width:100px; display:inline-block;" class="form-control" id="pcprefix" name="pcprefix" placeholder="p!" />
                                <span style="font-size: 20px; display:inline-block;" class="label-text">PokeCord Prefix</span>
                                <button onclick="changeprefix('pc', document.getElementById('pcprefix').value);" class="btn btn-validate" id="updatepcprefix" name="updatepcprefix"><span class="fa fa-check"></span></button>
                            </div>
                        </label>
                    </div>
                    <div class="form-check">
                        <label>
                            <div style="display:inline-block;">
                                <input type="text" style="width:100px; display:inline-block;" class="form-control" id="sbprefix" name="sbprefix" placeholder="p^" />
                                <span style="font-size: 20px; display:inline-block;" class="label-text">Self-Bot Prefix</span>
                                <button onclick="changeprefix('sb', document.getElementById('sbprefix').value);" class="btn btn-validate" id="updatesbprefix" name="updatesbprefix"><span class="fa fa-check"></span></button>
                            </div>
                        </label>
                    </div>
                </div>
                <div class="col-lg-8 pre-scrollable list_container" id="style-6" style="border:1px solid #cecece; max-height: 400px;">
                    <h2 style="direction:ltr;">Server White List : </h2>
                    <h6 style="direction:ltr;">(checked = will catch in)</h6>
                    <div id="listeserver">
                    </div>
                </div>
            </div>
        </div>
        <div class="container col-md-8" id="alertbox" style="margin-top: 25px; text-align: center;">
        </div>
    </div>
    <div class="container" id="thirdPage" style="display: none;">
        <div class="container" id="learnmoves" style="margin-top: 25px; text-align: center; border:1px solid #cecece;">
            <h2 style="direction:ltr;">Farm settings :</h2>
            <br />
            <label>
                <div style="display:inline-block;">
                    <input type="text" style="width:500px; display:inline-block;" class="form-control" id="farmtoken1" name="farmtoken1" placeholder="Token 1 here" />
                    <span style="font-size: 20px; display:inline-block;" class="label-text">Farmer 1 token</span>
                    <button onclick="farmerconfig('token1', document.getElementById('farmtoken1').value);" class="btn btn-validate" id="updatefarmtoken1" name="updatefarmtoken1"><span class="fa fa-check"></span></button>
                </div>
            </label>
            <label>
                <div style="display:inline-block;">
                    <input type="text" style="width:500px; display:inline-block;" class="form-control" id="farmtoken2" name="farmtoken2" placeholder="Token 2 here" />
                    <span style="font-size: 20px; display:inline-block;" class="label-text">Farmer 2 token</span>
                    <button onclick="farmerconfig('token2', document.getElementById('farmtoken2').value);" class="btn btn-validate" id="updatefarmtoken2" name="updatefarmtoken2"><span class="fa fa-check"></span></button>
                </div>
            </label>
            <label>
                <div style="display:inline-block;">
                    <input type="text" style="width:250px; display:inline-block;" class="form-control" id="farmchannelid" name="farmchannelid" placeholder="ID here" />
                    <span style="font-size: 20px; display:inline-block;" class="label-text">Channel ID (Tutorial <a href="https://www.youtube.com/watch?v=RI3_Z0AEMck">here</a>)</span>
                    <button onclick="farmerconfig('channelid', document.getElementById('farmchannelid').value);" class="btn btn-validate" id="updatefarmchannelid" name="updatefarmchannelid"><span class="fa fa-check"></span></button>
                </div>
            </label>
            <br />
            <label>
                <div style="display:inline-block;">
                    <input onchange="farmerconfig('state', document.getElementById('farmactive').checked);" class="form-control" type="checkbox" id="farmactive"> <span class="label-text">Active</span>
                </div>
            </label>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-lg-1" style="float: none; margin: 0 auto;">
            <a href="javascript:void(0)" onclick="pageprevious();" style="background-color: #4CAF50; color: white; display: inline-block; padding: 8px; border-radius: 10%;">
                <</a> <a href="javascript:void(0)" onclick="pagenext();" style="background-color: #4CAF50; color: white; display: inline-block; padding: 8px; border-radius: 10%;">>
            </a>
        </div>
    </div>
    <script>
        window.onload = function() {
            if (typeof autocatcher !== 'undefined') {
                if (autocatcher == true) {
                    document.getElementById("catcher").checked = true;
                };
            };
            if (typeof duplicate !== 'undefined') {
                if (duplicate == true) {
                    document.getElementById("duplicate").checked = true;
                };
            };
            if (typeof aliases !== 'undefined') {
                if (aliases == true) {
                    document.getElementById("aliases").checked = true;
                };
            };
            if (typeof farmer !== 'undefined') {
                farmtoken1 = farmer['token1'];
                farmtoken2 = farmer['token2'];
                farmchannelid = farmer['channelid'];
                farmstate = farmer['state'];
                if (farmtoken1 != 'none') {
                    document.getElementById("farmtoken1").placeholder = farmtoken1;
                }
                if (farmtoken2 != 'none') {
                    document.getElementById("farmtoken2").placeholder = farmtoken2;
                }
                if (farmchannelid != 'none') {
                    document.getElementById("farmchannelid").placeholder = farmchannelid;
                }
                document.getElementById("farmactive").checked = farmstate;
            };
            if (token !== 'undefined') {
                document.getElementById("tokentext").placeholder = token;
            };
            if (autocatchdelay !== 'undefined') {
                document.getElementById("delayms").placeholder = autocatchdelay;
            };
            if (prefixes !== 'undefined') {
                document.getElementById("sbprefix").placeholder = prefixes["pokebot"];
                document.getElementById("pcprefix").placeholder = prefixes["pokecord"];
            };
            if (spamactive !== 'undefined') {
                if (spamactive == true) {
                    document.getElementById("spammer").checked = spamactive;
                };
            };
            if (selected['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') !== 'undefined') {
                document.getElementById("img").innerHTML = '<img src="./img/' + selected['name'].replace(/\**/g, '').replace('**', '').replace(/ /g, '').replace(/ /g, '').replace(/é/g, 'e').replace(/è/g, 'e').replace('♂', '').replace('♀', '') + '.png" class="img-circle" width="50" height="50">';
            };
            if (textchannel == 'undefined') {
                document.getElementById("alertbox").classList.add("alert");
                document.getElementById("alertbox").classList.add("alert-danger");
                document.getElementById("alertbox").innerHTML += '<p><label><span>You haven\'t registered a text channel where I can talk ! (p^register)</span></label></p>';
            } else {
                document.getElementById("alertbox").parentNode.removeChild(document.getElementById("alertbox"));
            };
            if (typeof listobj !== 'undefined') {
                var html = [];
                for (k = 0; k < listobj['array']; k++) {
                    if (typeof listobj[k + 1] != undefined) {
                        try {
                            var pokemonname = listobj[k + 1]['name']
                            var pokemonlevel = listobj[k + 1]['level']
                            var pokemonnumber = k + 1;
                        } catch (e) {};
                        var color = 'background-color: transparent';
                        var legendaries = ['Moltres', 'Articuno', 'Zapdos', 'Mewtwo', 'Mew', 'Entei', 'Raikou', 'Suicune', 'Ho-Oh', 'Lugia', 'Celebi', 'Regice', 'Regirock', 'Registeel', 'Regigigas', 'Latios', 'Latias', 'Groudon', 'Kyogre', 'Rayquaza', 'Jirachi', 'Deoxys', 'Uxie', 'Mesprit', 'Azelf', 'Dialga', 'Palkia', 'Giratina', 'Arceus', 'Cresselia', 'Darkrai', 'Shaymin', 'Heatran', 'Manaphy', 'Phione', 'Cobalion', 'Terrakion', 'Virizion', 'Keldeo', 'Tornadus', 'Thundurus', 'Landorus', 'Zekrom', 'Reshiram', 'Kyurem', 'Victini', 'Meloetta', 'Genesect', 'Xerneas', 'Yveltal', 'Zygarde', 'Hoopa', 'Volcanion', 'Silvally', 'Tapu-Lele', 'Tapu-Koko', 'Tapu-Bulu', 'Tapu-Fini', 'Cosmog', 'Cosmoem', 'Solgaleo', 'Lunala', 'Necrozma', 'Magearna', 'Marshadow', 'Zeraora', 'Poipole', 'Naganadel', 'Guzzlord', 'Celesteela', 'Kartana', 'Xurkitree', 'Blacephalon', 'Buzzwole', 'Pheromosa', 'Nihilego', 'Stakataka']
                        if (legendaries.includes(pokemonname)) {
                            var color = 'background-color: Gold';
                        };
                        try {
                            if (typeof listobj[k + 1]['iv'] != undefined) {
                                var pokemoniv = listobj[k + 1]['iv'];
                                html[k] = '<div id="divpokemon' + pokemonnumber + '" style="' + color + '"><p style="display:inline-block;"><form style="float: left; padding: 5px;" id="formreleasepokemon' + pokemonnumber + '"><input onclick="dothis(\'release\',' + pokemonnumber + ',\'' + pokemonname + '\');" class="btn btn-danger" type="button" value="Release" id="releasepokemon' + pokemonnumber + '"/><input onclick="dothis(\'remove\',' + pokemonnumber + ',\'' + pokemonname + '\');" style="margin-left:5px" class="btn btn-danger" type="button" value="Remove" id="remove' + pokemonnumber + '"/></form><form style="float: left; padding: 5px;" id="formselectpokemon' + pokemonnumber + '"><input onclick="dothis(\'select\',' + pokemonnumber + ',\'' + pokemonname + '\');" class="btn btn-primary" type="button" value="Select" id="selectpokemon' + pokemonnumber + '"/></form><span class="label-text">Level ' + pokemonlevel + ' <img src="./img/' + pokemonname + '.png" class="img-circle" width="50" height="50"> ' + pokemonname + ' (' + pokemoniv + ')</span></p></div>'
                            } else {
                                html[k] = '<div id="divpokemon' + pokemonnumber + '" style="' + color + '"><p style="display:inline-block;"><form style="float: left; padding: 5px;" id="formreleasepokemon' + pokemonnumber + '"><input onclick="dothis(\'release\',' + pokemonnumber + ',\'' + pokemonname + '\');" class="btn btn-danger" type="button" value="Release" id="releasepokemon' + pokemonnumber + '"/><input onclick="dothis(\'remove\',' + pokemonnumber + ',\'' + pokemonname + '\');" style="margin-left:5px" class="btn btn-danger" type="button" value="Remove" id="remove' + pokemonnumber + '"/></form><form style="float: left; padding: 5px;" id="formselectpokemon' + pokemonnumber + '"><input onclick="dothis(\'select\',' + pokemonnumber + ',\'' + pokemonname + '\');" class="btn btn-primary" type="button" value="Select" id="selectpokemon' + pokemonnumber + '"/></form><span class="label-text">Level ' + pokemonlevel + ' <img src="./img/' + pokemonname + '.png" class="img-circle" width="50" height="50"> ' + pokemonname + '</span></p></div>'
                            };
                        } catch (e) {};
                        if (k == listobj['array'] - 1) {
							var clusterize = new Clusterize({
								rows: html,
								scrollId: 'PokeScroll',
								contentId: 'PokeContent'
							});
                        };
                    };
                };
            } else {
                var nopokemons = '<label><span style="color:red;" class="label-text">You don\'t have any pokemons / Your list isn\'t loaded :c</span></label>'
                document.getElementById("PokeContent").innerHTML = nopokemons;
            };
            if (servernames !== 'undefined') {
                serverarray = servernames.split(';');
                serveridarray = serverid.split(';');
                var html = '';
                whitelistobj = JSON.parse(whitelist);
                for (k = 0; k < serverarray.length; k++) {
                    var checked = '';
                    if (whitelistobj[serveridarray[k]]) {
                        checked = 'checked';
                    };
                    if (serverarray[k] != '') {
                        html = html + '<div class="form-check"><label><form><input ' + checked + ' onchange="refreshwhitelist(\'' + serveridarray[k] + '\');" type="checkbox" id="server' + serveridarray[k] + '"><span class="label-text"> ' + serverarray[k] + ' </span></form></label></div>'
                    };
                    if (k == serverarray.length - 1) {
                        document.getElementById("listeserver").innerHTML = html;
                    };
                };
            } else {
                var noservers = '<label><span style="color:red;" class="label-text">You don\'t have any servers :c</span></label>'
                document.getElementById("listeserver").innerHTML = noservers;
            };
        };
    </script>
</body>

</html>